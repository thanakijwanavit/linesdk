---

title: lineSdk


keywords: fastai
sidebar: home_sidebar

summary: "interact with product apis"
description: "interact with product apis"
nb_path: "linesdk.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: linesdk.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FunctionNames" class="doc_header"><code>class</code> <code>FunctionNames</code><a href="https://github.com/thanakijwanavit/linesdk/tree/master/linesdk/linesdk.py#L14" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FunctionNames</code>(<strong><code>branchName</code></strong>:<code>str</code>=<em><code>'dev-manual'</code></em>)</p>
</blockquote>

<pre><code>determine function and resources name based on branchName</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Line" class="doc_header"><code>class</code> <code>Line</code><a href="https://github.com/thanakijwanavit/linesdk/tree/master/linesdk/linesdk.py#L28" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Line</code>(<strong><code>accessKey</code></strong>:<code>str</code>=<em><code>''</code></em>)</p>
</blockquote>

<pre><code>the main class for interacting with product endpoint
user/pw are optional</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="LineLambda" class="doc_header"><code>class</code> <code>LineLambda</code><a href="https://github.com/thanakijwanavit/linesdk/tree/master/linesdk/linesdk.py#L57" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>LineLambda</code>(<strong><code>user</code></strong>=<em><code>None</code></em>, <strong><code>pw</code></strong>=<em><code>None</code></em>, <strong><code>region</code></strong>=<em><code>'ap-southeast-1'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Testing">Testing<a class="anchor-link" href="#Testing"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="generate-dummy-data-for-testing">generate dummy data for testing<a class="anchor-link" href="#generate-dummy-data-for-testing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-main-class-object">Create main class object<a class="anchor-link" href="#Create-main-class-object"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">accessKey</span> <span class="o">=</span> <span class="n">accessKey</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="sendMessage">sendMessage<a class="anchor-link" href="#sendMessage"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">roomId</span> <span class="o">=</span> <span class="n">sampleInput</span><span class="p">[</span><span class="s1">&#39;roomId&#39;</span><span class="p">],</span> <span class="n">message</span><span class="o">=</span> <span class="n">sampleInput</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">LineBotApiError</span>                           Traceback (most recent call last)
<span class="ansi-green-fg">&lt;timed exec&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>

<span class="ansi-green-fg">&lt;ipython-input-14-655cd6ee6e8c&gt;</span> in <span class="ansi-cyan-fg">send</span><span class="ansi-blue-fg">(self, message, roomId)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> 
<span class="ansi-green-intense-fg ansi-bold">     12</span>   <span class="ansi-green-fg">def</span> send<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> message<span class="ansi-blue-fg">:</span>str <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">,</span> roomId<span class="ansi-blue-fg">:</span>str<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg">     </span>self<span class="ansi-blue-fg">.</span>line_bot_api<span class="ansi-blue-fg">.</span>push_message<span class="ansi-blue-fg">(</span>roomId<span class="ansi-blue-fg">,</span> TextSendMessage<span class="ansi-blue-fg">(</span>text <span class="ansi-blue-fg">=</span> message<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     14</span>     <span class="ansi-green-fg">return</span> <span class="ansi-green-fg">True</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> 

<span class="ansi-green-fg">~/anaconda3/envs/python38/lib/python3.8/site-packages/linebot/api.py</span> in <span class="ansi-cyan-fg">push_message</span><span class="ansi-blue-fg">(self, to, messages, retry_key, notification_disabled, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>         }
<span class="ansi-green-intense-fg ansi-bold">    146</span> 
<span class="ansi-green-fg">--&gt; 147</span><span class="ansi-red-fg">         self._post(
</span><span class="ansi-green-intense-fg ansi-bold">    148</span>             <span class="ansi-blue-fg">&#39;/v2/bot/message/push&#39;</span><span class="ansi-blue-fg">,</span> data<span class="ansi-blue-fg">=</span>json<span class="ansi-blue-fg">.</span>dumps<span class="ansi-blue-fg">(</span>data<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> timeout<span class="ansi-blue-fg">=</span>timeout
<span class="ansi-green-intense-fg ansi-bold">    149</span>         )

<span class="ansi-green-fg">~/anaconda3/envs/python38/lib/python3.8/site-packages/linebot/api.py</span> in <span class="ansi-cyan-fg">_post</span><span class="ansi-blue-fg">(self, path, endpoint, data, headers, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">   1151</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1152</span> 
<span class="ansi-green-fg">-&gt; 1153</span><span class="ansi-red-fg">         </span>self<span class="ansi-blue-fg">.</span>__check_error<span class="ansi-blue-fg">(</span>response<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1154</span>         <span class="ansi-green-fg">return</span> response
<span class="ansi-green-intense-fg ansi-bold">   1155</span> 

<span class="ansi-green-fg">~/anaconda3/envs/python38/lib/python3.8/site-packages/linebot/api.py</span> in <span class="ansi-cyan-fg">__check_error</span><span class="ansi-blue-fg">(response)</span>
<span class="ansi-green-intense-fg ansi-bold">   1173</span>             <span class="ansi-green-fg">pass</span>
<span class="ansi-green-intense-fg ansi-bold">   1174</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1175</span><span class="ansi-red-fg">             raise LineBotApiError(
</span><span class="ansi-green-intense-fg ansi-bold">   1176</span>                 status_code<span class="ansi-blue-fg">=</span>response<span class="ansi-blue-fg">.</span>status_code<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">   1177</span>                 headers<span class="ansi-blue-fg">=</span>dict<span class="ansi-blue-fg">(</span>response<span class="ansi-blue-fg">.</span>headers<span class="ansi-blue-fg">.</span>items<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span>

<span class="ansi-red-fg">LineBotApiError</span>: LineBotApiError: status_code=429, request_id=f8dbe399-7e08-4b34-88f1-9389e32685da, error_response={&#34;details&#34;: [], &#34;message&#34;: &#34;You have reached your monthly limit.&#34;}, headers={&#39;Server&#39;: &#39;openresty&#39;, &#39;Content-Type&#39;: &#39;application/json&#39;, &#39;x-line-request-id&#39;: &#39;f8dbe399-7e08-4b34-88f1-9389e32685da&#39;, &#39;x-content-type-options&#39;: &#39;nosniff&#39;, &#39;x-xss-protection&#39;: &#39;1; mode=block&#39;, &#39;x-frame-options&#39;: &#39;DENY&#39;, &#39;Content-Length&#39;: &#39;50&#39;, &#39;Expires&#39;: &#39;Mon, 19 Oct 2020 05:03:02 GMT&#39;, &#39;Cache-Control&#39;: &#39;max-age=0, no-cache, no-store&#39;, &#39;Pragma&#39;: &#39;no-cache&#39;, &#39;Date&#39;: &#39;Mon, 19 Oct 2020 05:03:02 GMT&#39;, &#39;Connection&#39;: &#39;close&#39;}</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SendNotify">SendNotify<a class="anchor-link" href="#SendNotify"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">sendNotify</span><span class="p">(</span><span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;nothing&#39;</span><span class="p">,</span> <span class="n">token</span> <span class="o">=</span> <span class="s1">&#39;ECycqerh1xQKGlXAb2qifyz39A0GW8LHyX1hBBFSQGl&#39;</span><span class="p">)</span>
<span class="n">result</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 13.3 ms, sys: 64 µs, total: 13.4 ms
Wall time: 311 ms
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;{&#34;status&#34;:200,&#34;message&#34;:&#34;ok&#34;}&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Lambda">Lambda<a class="anchor-link" href="#Lambda"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Line</span><span class="o">.</span><span class="n">lambdaSend</span><span class="p">(</span><span class="n">sampleInput</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Call-function-using-deployed-Lambda-function">Call function using deployed Lambda function<a class="anchor-link" href="#Call-function-using-deployed-Lambda-function"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="n">lineLambda</span> <span class="o">=</span> <span class="n">LineLambda</span><span class="p">(</span><span class="n">USER</span><span class="p">,</span> <span class="n">PW</span><span class="p">)</span>
<span class="n">lineLambda</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">roomId</span> <span class="o">=</span> <span class="n">sampleInput</span><span class="p">[</span><span class="s1">&#39;roomId&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

